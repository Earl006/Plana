<app-navbar></app-navbar>

<div class="flex justify-center items-center h-[80%] py-24">
  <div class="relative w-full max-w-4xl h-[600px] bg-gray-800 rounded-xl shadow-lg overflow-hidden">
    <!-- Request Reset Code Form -->
    <div class="absolute top-0 left-0 w-1/2 h-full p-8 flex flex-col justify-center items-center transition-all duration-700 ease-in-out"
         [ngClass]="{'translate-x-full opacity-0': isCodeRequested}">
      <h2 class="text-3xl font-bold mb-6 text-white text-center">Request Reset Code</h2>
      <div *ngIf="successMessage" class="mb-4 bg-green-500 text-white px-4 py-2 rounded-lg flex justify-between items-center">
        <span>{{ successMessage }}</span>
        <button type="button" class="text-white hover:text-gray-200" (click)="clearMessages()" aria-label="Close">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    
      <div *ngIf="errorMessage" class="mb-4 bg-red-500 text-white px-4 py-2 rounded-lg flex justify-between items-center">
        <span>{{ errorMessage }}</span>
        <button type="button" class="text-white hover:text-gray-200" (click)="clearMessages()" aria-label="Close">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <form class="space-y-4 w-full max-w-sm" [formGroup]="requestCodeForm" (ngSubmit)="onRequestCode()">
        <input type="email" placeholder="Email" formControlName="email" class="w-full p-2 rounded bg-gray-700 text-white placeholder-gray-400 focus:outline-none" required>
        <button type="submit" class="w-full py-2 px-4 bg-black text-white rounded hover:bg-gray-900 transition">Request Reset Code</button>
      </form>
    </div>

    <!-- Reset Password Form -->
    <div class="absolute top-0 left-0 w-1/2 h-full p-8 flex flex-col justify-center items-center transition-all duration-700 ease-in-out"
         [ngClass]="{'translate-x-full opacity-100': !isCodeRequested, 'text-opacity-100': isCodeRequested}">
      <h2 class="text-3xl font-bold mb-6 text-white text-center">Reset Your Password</h2>
      <div *ngIf="successMessage" class="mb-4 bg-green-500 text-white px-4 py-2 rounded-lg flex justify-between items-center">
        <span>{{ successMessage }}</span>
        <button type="button" class="text-white hover:text-gray-200" (click)="clearMessages()" aria-label="Close">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    
      <div *ngIf="errorMessage" class="mb-4 bg-red-500 text-white px-4 py-2 rounded-lg flex justify-between items-center">
        <span>{{ errorMessage }}</span>
        <button type="button" class="text-white hover:text-gray-200" (click)="clearMessages()" aria-label="Close">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <form class="space-y-4 w-full max-w-sm" [formGroup]="resetPasswordForm" (ngSubmit)="onResetPassword()">
        <input type="text" placeholder="Reset Code" formControlName="resetCode" class="w-full p-2 rounded bg-gray-700 text-white placeholder-gray-400 focus:outline-none" required>
        <input type="password" placeholder="New Password" formControlName="newPassword" class="w-full p-2 rounded bg-gray-700 text-white placeholder-gray-400 focus:outline-none" required>
        <input type="password" placeholder="Confirm New Password" formControlName="confirmPassword" class="w-full p-2 rounded bg-gray-700 text-white placeholder-gray-400 focus:outline-none" required>
        <button type="submit" class="w-full py-2 px-4 bg-black text-white rounded hover:bg-gray-900 transition">Reset Password</button>
      </form>
    </div>

    <!-- Sliding Overlay -->
    <div class="absolute top-0 left-1/2 w-1/2 h-full overflow-hidden transition-all duration-700 ease-in-out"
         [ngClass]="{'left-0': !isCodeRequested}">
      <div class="absolute top-0 left-0 w-[200%] h-full flex transition-all duration-700 ease-in-out"
           [ngClass]="{'translate-x-[-50%]': !isCodeRequested}">
        <!-- Request Code Overlay -->
        <div class="w-1/2 h-full flex flex-col justify-center items-center px-8 bg-gradient-to-b from-blue-800 to-blue-300 text-white">
          <img src="/carousel-img/undraw_forgot_password_re_hxwm.svg" alt="Secure Login" class="h-80">
        </div>
        <!-- Reset Password Overlay -->
        <div class="w-1/2 h-full flex flex-col justify-center items-center px-8 bg-gradient-to-t from-blue-900 to-blue-600 text-white">
          <img src="/carousel-img/undraw_forgot_password_re_hxwm.svg" alt="Secure Login" class="h-80">
        </div>
      </div>
    </div>
  </div>
</div>
